<!DOCTYPE html>
<html lang="pt-br">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width,initial-scale=1.0">
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <!--<link rel="stylesheet" href="assets/css/index.css">-->
      <title>Cadastrar Usuário</title>
      <script src="funcoes.js"></script>
  </head>
  <body>
    
    <main>
        <h1>Cadastra-se</h1>
        <section>
          <!-- <form name="cadastro" id="cadastro" > -->
            <p><label for="nome">Nome: </label><input type="text" name="nome" id="nome"></p>
            <p><label for="cpf">CPF: </label><input type="text" name="cpf" id="cpf" size="11"></p>
            <p><label for="email">email: </label><input type="email" name="email" id="email" onblur="pesquisaemail(this.value);" ></p>
            <p><label for="cep">CEP: </label><input type="number" name="cep" id="cep" onblur="pesquisacep(this.value);" ></p>
            <p><label for="rua">Rua: </label><input type="text" name="rua" id="rua" disabled></p>
            <p><label for="Numero">Numero: </label><input type="number" name="numero" id="numero"></p>
            <p><label for="Bairro">Bairro: </label><input type="text" name="bairro" id="bairro" disabled></p>
            <p><label for="Cidade">Cidade: </label><input type="text" name="cidade" id="cidade"disabled ></p>
            <p><label for="Estado">Estado: </label><input type="text" name="estado" id="estado" disabled ></p>
            <p><label for="Complemento">Complemento: </label><input type="text" name="complemento" id="complemento"></p>
            <p><label for="telefone">Telefone: </label> <input type="text" name="telefone" id="telefone"></p>
            <p><label for="senha">Senha: </label><input type="password" name="senha" id="senha"></p>
            <p><button type="submit" id='cadastrar' name='cadastrar' value="Cadastrar" onclick="cadastrarUsuario()" > Cadastrar </button>  </p>      
            <button type="button"> <a href="login.html"> Voltar </a> </button>
          <!-- </form> -->
        </section>
    </main>
 

  </body>

  <!-- <script>
    function gerarObjetoUsuario(){
      const nome = ObterValor('nome');
      const cpf = ObterValor('cpf');
      const email = ObterValor('email');
      const cep = ObterValor('cep');
      const rua = ObterValor('rua');
      const numero = ObterValor('numero');
      const bairro = ObterValor('bairro');
      const cidade = ObterValor('cidade');
      const estado = ObterValor('estado');
      const complemento = ObterValor('complemento');
      const telefone = ObterValor('telefone');
      const senha = ObterValor('senha');
      const status = 1;
      //const dt_nascimento = ObterValor('dt_nascimento');
      const cadastrar = true;
      return { // Cria o objeto 
        nome,cpf,email,cep,rua,numero,bairro,cidade,estado,complemento,status,senha,telefone,cadastrar
      }

    }
  
    function ObterValor(id){
      const campo = document.getElementById(id);
      if(campo === null){
        return ''; // retorna uma string em branco
      }else {
        return campo.value;
      }
    }
    
    function cadastrarUsuario(){

      const dadosUsuario = gerarObjetoUsuario();
      
      if( formularioValido(dadosUsuario)){
        fetch('includes/logica/logica_usuario.php',{
          method: 'post',
          body: JSON.stringify(dadosUsuario)// converte para JSON o JSON.stringify // body apenas quando quero fazer um post
        }).then((response)=> {
            console.log(response);
            //window.location.href = "./login.php"
        });
      }else{
        alert("Verifique os Campos, Existe  Campos Não Preenchidos");
      }
    }

    function formularioValido(dadosUsuario){
      let campoVazio = false; 
      const arrayDadosUser = Object.values(dadosUsuario);
      arrayDadosUser.forEach(cont=>{
        if(cont === ''){
           campoVazio = true;
        }
      });

      return !campoVazio;  
    }

   
  </script> --> 
 
  

</html>